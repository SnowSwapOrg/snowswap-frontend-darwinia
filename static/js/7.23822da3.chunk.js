(this["webpackJsonppancake-frontend"]=this["webpackJsonppancake-frontend"]||[]).push([[7],{1017:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ze}));var r,c,a,s,o,i,d,u,b,l,j,O,h,f,x,p,m=n(10),v=n(0),w=n.n(v),k=n(4),g=n(200),y=n(23),S=n(34),C=n(185),T=n(11),A=n(2),q=n(56),U=n(26),L=n(374),M=n(120),D=n(183),E=n(9),I=n(53),P=n(30),R=n(1),B=["value","onUserInput","placeholder"],z=Object(k.e)(A.G)(r||(r=Object(m.a)(["\n  color: ",";\n  text-align: ",";\n  ::placeholder {\n    color: ",";\n  }\n"])),(function(e){var t=e.error,n=e.theme;return t?n.colors.failure:n.colors.text}),(function(e){var t=e.align;return t&&t}),(function(e){return e.theme.colors.textSubtle})),F=RegExp("^\\d*(?:\\\\[.])?\\d*$"),H=w.a.memo((function(e){var t=e.value,n=e.onUserInput,r=e.placeholder,c=Object(I.a)(e,B),a=Object(y.b)().t;return Object(R.jsx)(z,Object(E.a)(Object(E.a)({},c),{},{value:t,onChange:function(e){var t;(""===(t=e.target.value.replace(/,/g,"."))||F.test(Object(P.d)(t)))&&n(t)},inputMode:"decimal",title:a("Token Amount"),autoComplete:"off",autoCorrect:"off",type:"text",pattern:"^[0-9]*[.,]?[0-9]*$",placeholder:r||"0.0",minLength:1,maxLength:79,spellCheck:"false"}))})),G=(A.G,n(74)),J=n(378),$=n(6),Q=n(47),W=n(97),Y=n(41),K=n(35),N=["token"],V=function(e){var t=e.symbol===K.h?Y.b.wbnb.address:e.address;return"/images/tokens/".concat(K.d,"/").concat(t,".svg")},X=function(e){var t=e.token,n=Object(I.a)(e,N);return Object(R.jsx)(A.hb,Object(E.a)({src:V(t)},n))},Z=3600,_=86400,ee=2629800,te=31557600,ne=function(e){var t=Math.abs(e),n={years:0,months:0,days:0,hours:0,minutes:0,seconds:0};return t>=te&&(n.years=Math.floor(t/te),t-=n.years*te),t>=ee&&(n.months=Math.floor(t/ee),t-=n.months*ee),t>=_&&(n.days=Math.floor(t/_),t-=n.days*_),t>=Z&&(n.hours=Math.floor(t/Z),t-=n.hours*Z),t>=60&&(n.minutes=Math.floor(t/60),t-=60*n.minutes),n.seconds=t,n},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return Object.keys(e).forEach((function(r){e[r]>0&&!t.includes(r)&&n.push("".concat(e[r]).concat(r.substr(0,1)))})),0===n.length?null:n.join(" ")},ce=n(85),ae=n(107),se=n(44),oe=n(84),ie=n.n(oe),de=n(5),ue=n.n(de),be=n(32),le=n(241),je=n(135),Oe=n(132),he=n(95),fe=function(){return Oe.a.getState().user.gasPrice||he.a.default},xe={gasLimit:K.f},pe=function(){var e=Object(be.a)(ue.a.mark((function e(t,n){var r,c,a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fe(),e.next=3,t.stake(n,Object(E.a)(Object(E.a)({},xe),{},{gasPrice:r}));case 3:return c=e.sent,e.next=6,c.wait();case 6:return a=e.sent,e.abrupt("return",a.status);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=Object(be.a)(ue.a.mark((function e(t,n){var r,c,a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fe(),e.next=3,t.withdraw(n,Object(E.a)(Object(E.a)({},xe),{},{gasPrice:r}));case 3:return c=e.sent,e.next=6,c.wait();case 6:return a=e.sent,e.abrupt("return",a.status);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(be.a)(ue.a.mark((function e(t){var n,r,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fe(),e.next=3,t.getReward(Object(E.a)(Object(E.a)({},xe),{},{gasPrice:n}));case 3:return r=e.sent,e.next=6,r.wait();case 6:return c=e.sent,e.abrupt("return",c.status);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=n(86),ke=n(160),ge=n(215),ye=n(153),Se=Object(k.f)(c||(c=Object(m.a)(["\n  from {\n    max-height: 0px;\n  }\n  to {\n    max-height: 800px;\n  }\n"]))),Ce=Object(k.f)(a||(a=Object(m.a)(["\n  from {\n    max-height: 800px;\n  }\n  to {\n    max-height: 0px;\n  }\n"]))),Te=k.e.div(s||(s=Object(m.a)(["\n  animation: ",";\n  overflow: hidden;\n  background: ",";\n  display: flex;\n  width: 100%;\n  /* flex-direction: column-reverse; */\n  flex-direction: column;\n\n  "," {\n    flex-direction: column;\n    padding: 16px 32px;\n  }\n  margin-top: 10px;\n"])),(function(e){return e.expanded?Object(k.d)(o||(o=Object(m.a)(["\n          "," 300ms linear forwards\n        "])),Se):Object(k.d)(i||(i=Object(m.a)(["\n          "," 300ms linear forwards\n        "])),Ce)}),(function(e){return e.theme.colors.background}),(function(e){return e.theme.mediaQueries.lg})),Ae=k.e.div(d||(d=Object(m.a)(["\n  font-size: 12px;\n  color: ",";\n  text-align: left;\n"])),(function(e){return e.theme.colors.textSubtle})),qe=k.e.td(u||(u=Object(m.a)(["\n  background: ",";\n"])),(function(e){return e.theme.colors.background})),Ue=Object(k.e)(A.A)(b||(b=Object(m.a)(["\n  border-radius: 10px;\n  padding: 1rem;\n  border: 2px solid ",";\n"])),(function(e){return e.theme.colors.cardBorder})),Le=Object(k.e)(A.r)(l||(l=Object(m.a)(["\n  transform: ",";\n  height: 20px;\n  cursor: pointer;\n"])),(function(e){return e.toggled?"rotate(180deg)":"rotate(0)"})),Me=k.e.tr(j||(j=Object(m.a)(["\n  cursor: pointer;\n  border-bottom: 2px solid ",";\n  td {\n    padding: 20px;\n  }\n"])),(function(e){return e.theme.colors.cardBorder})),De=k.e.tr(O||(O=Object(m.a)(["\n  cursor: pointer;\n  border-bottom: 2px solid ",";\n  div {\n    font-size: 12px;\n  }\n  td {\n    padding: 8px;\n  }\n"])),(function(e){return e.theme.colors.cardBorder})),Ee=k.e.span(h||(h=Object(m.a)(["\n  color: ",";\n  text-decoration: underline;\n  cursor: pointer;\n"])),(function(e){return e.theme.colors.primary})),Ie=function(e){var t=e.farm,n=Object(y.b)().t,r=Object(A.tb)(),c=(r.isDesktop,r.isMobile),a=(t.startTime+t.rewardsDuration)/1e3<Date.now(),s=Object(U.a)(),o=s.account,i=s.chainId,d=s.library,u=Object(v.useState)(""),b=Object(T.a)(u,2),l=b[0],j=b[1],O=Object(v.useState)(""),h=Object(T.a)(O,2),f=h[0],x=h[1],p=Object(ce.e)(t.token.address,t.token.address.toLowerCase()===Y.b.usdt.address.toLowerCase()?Y.b.usdc.address:Y.b.usdt.address),m=Object(ce.e)(t.quoteToken.address,t.quoteToken.address.toLowerCase()===Y.b.usdt.address.toLowerCase()?Y.b.usdc.address:Y.b.usdt.address),w=Object(ce.e)(t.rewardToken.address,t.rewardToken.address.toLowerCase()===Y.b.usdt.address.toLowerCase()?Y.b.usdc.address:Y.b.usdt.address),k=Object(se.c)(t.token.address),g=Object(se.c)(t.quoteToken.address),S=Object(ae.b)(null!==k&&void 0!==k?k:void 0,null!==g&&void 0!==g?g:void 0),E=Object(T.a)(S,2),I=(E[0],E[1]),P=Object(D.a)(null===I||void 0===I?void 0:I.liquidityToken),B=(null===I||void 0===I?void 0:I.reserve0.token.address)===t.token.address?null===I||void 0===I?void 0:I.reserve0:null===I||void 0===I?void 0:I.reserve1,z=(null===I||void 0===I?void 0:I.reserve0.token.address)===t.token.address?null===I||void 0===I?void 0:I.reserve1:null===I||void 0===I?void 0:I.reserve0,F=Object(v.useMemo)((function(){if(p&&p[t.token.address.toLowerCase()]&&B){var e=new ie.a(p[t.token.address.toLowerCase()]),n=new ie.a(Object(L.a)(Q.a.from(B.raw.toString()),B.currency.decimals,B.currency.decimals));return e.times(n)}return new ie.a(0)}),[t.token.address,p,B]),K=Object(v.useMemo)((function(){if(m&&m[t.quoteToken.address.toLowerCase()]&&z){var e=new ie.a(m[t.quoteToken.address.toLowerCase()]),n=new ie.a(Object(L.a)(Q.a.from(z.raw.toString()),z.currency.decimals,z.currency.decimals));return e.times(n)}return new ie.a(0)}),[t.quoteToken.address,m,z]),N=Object(v.useMemo)((function(){if(w&&w[t.rewardToken.address.toLowerCase()]){var e=new ie.a(w[t.rewardToken.address.toLowerCase()]),n=new ie.a(Object(L.a)(Q.a.from(t.rewardsAmount),t.rewardToken.decimals,t.rewardToken.decimals));return e.times(n)}return new ie.a(0)}),[t.rewardToken.address,t.rewardToken.decimals,t.rewardsAmount,w]),V=F.eq(0)?K.times(2):F.times(2),Z=t.poolAddress,_=Object(q.d)(Z,!0),ee=function(e){var t=Object(v.useState)(je.b),n=Object(T.a)(t,2),r=n[0],c=n[1],a=Object(le.a)().slowRefresh;return Object(v.useEffect)((function(){var t=function(){var t=Object(be.a)(ue.a.mark((function t(){var n;return ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.totalSupply();case 2:n=t.sent,c(Object(je.c)(n));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e&&t()}),[e,a]),r}(_),te=function(e,t){var n=Object(v.useState)(je.b),r=Object(T.a)(n,2),c=r[0],a=r[1],s=Object(le.a)().fastRefresh;return Object(v.useEffect)((function(){var n=function(){var n=Object(be.a)(ue.a.mark((function n(){var r;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.balanceOf(t);case 2:r=n.sent,a(Object(je.c)(r));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();e&&t&&n()}),[t,e,s]),c}(_,o),oe=function(e,t){var n=Object(v.useState)(je.b),r=Object(T.a)(n,2),c=r[0],a=r[1],s=Object(le.a)().fastRefresh;return Object(v.useEffect)((function(){var n=function(){var n=Object(be.a)(ue.a.mark((function n(){var r;return ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.earned(t);case 2:r=n.sent,a(Object(je.c)(r));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();e&&t&&n()}),[t,e,s]),c}(_,o),de=Object(M.b)(Object(C.a)(t.lpAddresses)),Oe=function(e){return{onStake:Object(v.useCallback)(function(){var t=Object(be.a)(ue.a.mark((function t(n){return ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}}(_).onStake,he=function(e){return{onUnstake:Object(v.useCallback)(function(){var t=Object(be.a)(ue.a.mark((function t(n){return ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}}(_).onUnstake,fe=function(e){return{onHarvest:Object(v.useCallback)(Object(be.a)(ue.a.mark((function t(){return ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ve(e);case 2:case"end":return t.stop()}}),t)}))),[e])}}(_).onHarvest,xe=Object(v.useState)(!1),Se=Object(T.a)(xe,2),Ce=Se[0],Ie=Se[1],Pe=function(){Ie(!Ce)},Re=Object(A.rb)(Ce,300),Be=Object(J.a)(new $.i(i,Object(C.a)(t.lpAddresses),18),o,null===_||void 0===_?void 0:_.address),ze=Q.a.from((null===Be||void 0===Be?void 0:Be.raw.toString())||"0").eq(0)||Q.a.from((null===Be||void 0===Be?void 0:Be.raw.toString())||"0").lt(Object(G.parseUnits)(l.toString()||"0",18)),Fe=function(e,t,n){var r=Object(v.useState)(!1),c=Object(T.a)(r,2),a=c[0],s=c[1],o=Object(y.b)().t,i=Object(ke.a)(),d=i.toastSuccess,u=i.toastError,b=Object(ge.a)().callWithGasPrice;return{handleApprove:function(){var r=Object(be.a)(ue.a.mark((function r(){var c,a;return ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b(t,"approve",[e.address,we.a.constants.MaxUint256]);case 2:return c=r.sent,s(!0),r.next=6,c.wait();case 6:(a=r.sent).status?(d(o("Contract Enabled"),Object(R.jsx)(ye.b,{txHash:a.transactionHash,children:o("You can now stake in farm")})),n(),s(!1)):(u(o("Error"),o("Please try again. Confirm the transaction and make sure you are paying enough gas!")),s(!1));case 8:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),requestedApproval:a}}(_,Object(W.h)(Object(C.a)(t.lpAddresses),d.getSigner()),(function(){console.log("success")})),He=Fe.handleApprove,Ge=Fe.requestedApproval,Je=V.times(ee.div((null===P||void 0===P?void 0:P.raw.toString())||0)),$e=a?0:N.div(new ie.a(t.rewardsDuration)).times(31536e3).div(Je).times(100);return Object(R.jsxs)(R.Fragment,{children:[c?Object(R.jsxs)(De,{onClick:Pe,children:[Object(R.jsx)("td",{children:Object(R.jsxs)(A.A,{width:"50px",children:[Object(R.jsx)(X,{width:25,height:25,token:new $.i(t.token.chainId,t.token.address,t.token.decimals)}),Object(R.jsx)(X,{ml:"-5px",width:25,height:25,token:new $.i(t.quoteToken.chainId,t.quoteToken.address,t.quoteToken.decimals)})]})}),Object(R.jsx)("td",{children:Object(R.jsx)(A.eb,{children:t.lpSymbol})}),Object(R.jsxs)("td",{children:[Object(R.jsx)(Ae,{children:"Unclaimed"}),Object(R.jsxs)(A.eb,{children:[Object(L.b)(oe,t.rewardToken.decimals,4)," ",t.rewardToken.symbol]})]}),Object(R.jsx)("td",{children:Object(R.jsx)(Le,{color:"primary",toggled:Ce})})]}):Object(R.jsxs)(Me,{onClick:Pe,children:[Object(R.jsx)("td",{children:Object(R.jsxs)(A.A,{width:"60px",children:[Object(R.jsx)(X,{width:30,height:30,token:new $.i(t.token.chainId,t.token.address,t.token.decimals)}),Object(R.jsx)(X,{ml:"-10px",width:30,height:30,token:new $.i(t.quoteToken.chainId,t.quoteToken.address,t.quoteToken.decimals)})]})}),Object(R.jsx)("td",{children:Object(R.jsx)(A.eb,{children:t.lpSymbol})}),Object(R.jsxs)("td",{children:[Object(R.jsx)(Ae,{children:n("APR")}),Object(R.jsxs)(A.eb,{children:[$e.toFixed(2),"%",a?" - Expired":""]})]}),Object(R.jsxs)("td",{children:[Object(R.jsx)(Ae,{children:n("My Share")}),Object(R.jsxs)(A.eb,{children:[Object(L.b)(te,18,12)," (",te.eq(0)?"0":te.div(ee).multipliedBy(100).toFixed(2),"%)"]})]}),Object(R.jsxs)("td",{children:[Object(R.jsx)(Ae,{children:n("Unclaimed")}),Object(R.jsxs)(A.eb,{children:[Object(L.b)(oe,t.rewardToken.decimals,4)," ",t.rewardToken.symbol]})]}),Object(R.jsx)("td",{children:Object(R.jsx)(Le,{color:"primary",toggled:Ce})})]}),Re&&Object(R.jsx)("tr",{children:Object(R.jsx)(qe,{colSpan:6,children:Object(R.jsxs)(Te,{expanded:Re,children:[Object(R.jsxs)(A.A,{justifyContent:"space-between",width:"100%",flexDirection:c?"column":"row",children:[Object(R.jsxs)(Ue,{flex:"1",mx:"0.25rem",mb:"1rem",flexDirection:"column",children:[Object(R.jsxs)(A.A,{pb:"0.7rem",justifyContent:"space-between",children:[Object(R.jsx)(Ae,{children:n("Stake")}),Object(R.jsxs)(Ae,{children:[n("Balance"),":"," ",Object(R.jsx)(Ee,{onClick:function(){j(Object(L.b)(de.balance,18,18))},children:Object(L.b)(de.balance,18,18)})," "]})]}),Object(R.jsx)(A.A,{pb:"0.7rem",children:Object(R.jsx)(H,{placeholder:"0",value:l,onUserInput:function(e){j(e)}})}),Object(R.jsx)(A.A,{children:ze?Object(R.jsx)(A.i,{width:"100%",scale:"sm",disabled:Ge,onClick:He,variant:"secondary",children:n("Enable")}):Object(R.jsx)(A.i,{width:"100%",scale:"sm",disabled:Object(G.parseUnits)(l.toString()||"0",18).eq(Q.a.from(0))||Object(G.parseUnits)(l.toString()||"0",18).gt(Q.a.from(de.balance.toString()))||a,onClick:function(){Oe(Object(G.parseUnits)(l.toString()||"0",18).toString())},children:n("Stake")})})]}),Object(R.jsxs)(Ue,{flex:"1",mx:"0.25rem",mb:"1rem",flexDirection:"column",children:[Object(R.jsxs)(A.A,{pb:"0.7rem",justifyContent:"space-between",children:[Object(R.jsx)(Ae,{children:n("Unstake")}),Object(R.jsxs)(Ae,{children:[n("My Share"),":"," ",Object(R.jsx)(Ee,{onClick:function(){x(Object(L.b)(te,18,18))},children:Object(L.b)(te,18,18)})]})]}),Object(R.jsx)(A.A,{pb:"0.7rem",children:Object(R.jsx)(H,{placeholder:"0",value:f,onUserInput:function(e){x(e)}})}),Object(R.jsx)(A.A,{children:Object(R.jsx)(A.i,{width:"100%",scale:"sm",disabled:Object(G.parseUnits)(f.toString()||"0",18).gt(Q.a.from(te.toString())),onClick:function(){he(Object(G.parseUnits)(f.toString()||"0",18).toString())},children:n("Unstake")})})]}),Object(R.jsxs)(Ue,{flexDirection:"column",mb:"1rem",mx:"0.25rem",children:[Object(R.jsx)(A.A,{pb:"0.7rem",children:Object(R.jsxs)(A.eb,{children:[Object(L.b)(oe,t.rewardToken.decimals,4)," ",t.rewardToken.symbol]})}),Object(R.jsx)(A.A,{children:Object(R.jsx)(A.i,{disabled:oe.eq(0),width:"100%",scale:"sm",onClick:fe,children:n("Claim")})})]})]}),Object(R.jsxs)(A.h,{pb:"2rem",children:[Object(R.jsxs)(Ae,{children:[n("Earliest Start Time"),":"]}),Object(R.jsx)(A.eb,{children:new Date(t.startTime).toLocaleDateString(void 0)}),Object(R.jsxs)(Ae,{children:[n("Rewards Duration"),":"]}),Object(R.jsx)(A.eb,{children:re(ne(t.rewardsDuration))}),Object(R.jsxs)(Ae,{children:[n("APR"),":"]}),Object(R.jsxs)(A.eb,{children:[$e.toFixed(2),"%",a?" - Expired":""]})]})]})})})]})},Pe=k.e.div(f||(f=Object(m.a)(["\n  align-items: flex-start;\n  display: flex;\n  flex-direction: column;\n  /* height: calc(100vh - 64px); */\n  justify-content: flex-start;\n"]))),Re=k.e.table(x||(x=Object(m.a)(["\n  border-collapse: collapse;\n  font-size: 14px;\n  border-radius: 20px 20px 0 0;\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n  background: ",";\n  color: ",";\n"])),(function(e){return e.theme.card.background}),(function(e){return e.theme.colors.text})),Be=k.e.tbody(p||(p=Object(m.a)(["\n  & tr {\n    td {\n      font-size: 16px;\n      vertical-align: middle;\n    }\n  }\n"]))),ze=function(){Object(y.b)().t;return Object(R.jsx)(g.b,{children:Object(R.jsx)(Pe,{children:Object(R.jsx)(Re,{children:Object(R.jsx)(Be,{children:S.w.map((function(e){return Object(C.a)(e.lpAddresses)?Object(R.jsx)(Ie,{farm:e},e.pid):null}))})})})})}}}]);